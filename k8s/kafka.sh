helm install kafka bitnami/kafka \
    --set controller.replicaCount=3 \
    --set externalAccess.enabled=true \
    --set externalAccess.controller.service.type=NodePort \
    --set externalAccess.controller.service.ports.external=9094 \
    --set externalAccess.autoDiscovery.enabled=true \
    --set serviceAccount.create=true \
    --set rbac.create=true \
    --set listeners.client.protocol=PLAINTEXT \
    --set listeners.controller.protocol=PLAINTEXT \
    --set controller.automountServiceAccountToken=true \
    --set broker.automountServiceAccountToken=true \
    --set topic.autoCreate=true \
    --set broker.persistence.size=256Mi \
    --set controller.persistence.size=256Mi \
    --set controller.resources.requests.cpu=200m \
    --set controller.resources.requests.memory=256Mi \
    --set controller.resources.limits.cpu=500m \
    --set controller.resources.limits.memory=512Mi \
    --set broker.resources.requests.cpu=200m \
    --set broker.resources.requests.memory=256Mi \
    --set broker.resources.limits.cpu=500m \
    --set broker.resources.limits.memory=512Mi \
    --set heapOpts="-Xmx256m -Xms256m"
